#include "stdafx.h"
#include "Canvas.h"

/////////////////////////////////////////////////////////////////////////////
CanvasPtr Canvas::instance(getInstance());

/////////////////////////////////////////////////////////////////////////////
Canvas::Canvas() : m_hWnd(NULL)
{
}

/////////////////////////////////////////////////////////////////////////////
Canvas::~Canvas()
{
}

/////////////////////////////////////////////////////////////////////////////
Canvas* Canvas::getInstance()
{
    if (instance.get() == nullptr){
        instance = CanvasPtr(new Canvas());
    }
    return instance.get();
}

/////////////////////////////////////////////////////////////////////////////
void Canvas::Invalidate(CRect& rc)
{
    InvalidateRect(m_hWnd, rc, FALSE);
}

/////////////////////////////////////////////////////////////////////////////
void Canvas::SetPixel(uint16_t x, uint16_t y, uint8_t color) const
{
    m_bitmap.SetPixel(x, y, color);
}

/////////////////////////////////////////////////////////////////////////////
void Canvas::Render(CPaintDC& dc)
{
    m_bitmap.Render(dc);
}
